<%- include('../layout/profileHeader') %>
<div class="d-flex justify-content-center align-items-center" style="width:1210px;">
    <div class="">
    <%if(address){%>
        <div class="d-flex justify-content-center align-items-center"><span class="addr-head">Change Address</span></div>
       <div class="addr-box">           
                  
                    <div  class="m-3 d-flex">
                        <span class="addrs-text-box text-span">Name</span>
                        <input class="addrs-text-box" type="text" name="name"  value="<%= address.name %>">
                    </div>
                    <div  class="m-3 d-flex">
                        <span class="addrs-text-box text-span">Mobile</span>
                        <input class="addrs-text-box" type="text" name="mobile"  value="<%= address.mobile %>">
                    </div >
                    <div  class="m-3 d-flex">
                        <span class="addrs-text-box text-span">Pin No</span>
                        <input class="addrs-text-box" type="text" name="pin"  value="<%= address.pincode %>">
                    </div>
                    <div  class="m-3 d-flex">
                        <span class="addrs-text-box text-span">House</span>
                        <input class="addrs-text-box" type="text" name="house"  value="<%= address.house %>">
                    </div>
                    <div  class="m-3 d-flex">
                        <span class="addrs-text-box text-span">Street</span>
                        <input class="addrs-text-box" type="text" name="street"  value="<%= address.street %>">
                    </div>               
                    <div  class="m-3 d-flex">
                        <span class="addrs-text-box text-span">Landmark</span>
                        <input class="addrs-text-box" type="text" name="landmark"  value="<%= address.landmark %>">
                    </div>                
                    <div  class="m-3 d-flex">
                        <span class="addrs-text-box text-span">City</span>
                        <input class="addrs-text-box" type="text" name="city" value="<%= address.city %>">
                    </div>
                    <div  class="m-3 d-flex">
                        <span class="addrs-text-box text-span">State</span>
                        <input class="addrs-text-box" type="text" name="state"  value="<%= address.state %>">
                    </div>
                    <div  class="m-3 d-flex">
                        <span class="addrs-text-box text-span">Country</span>
                        <input class="addrs-text-box" type="text" name="country" value="<%= address.country %>">
                    </div>
                    
                
                <div  class="m-3">
                    <button type="button" onclick="changeAddress('<%=address._id%>')" class="use-but ord-but  text-white" style="background-color: #4F0341; width:400px;margin-left:0px;height:50px;">Save this address</button>
                </div>
                
        </div>
   
    </div>
    <%}%>
    </div>
</div>

<script>
     function changeAddress(addrid){
        
        const name =document.querySelector('input[name="name"]').value;
        const mobile =document.querySelector('input[name="mobile"]').value;
        const house =document.querySelector('input[name="house"]').value;
        const street =document.querySelector('input[name="street"]').value;
        const landmark =document.querySelector('input[name="landmark"]').value;
        const city =document.querySelector('input[name="city"]').value;
        const pin =document.querySelector('input[name="pin"]').value;
        const state =document.querySelector('input[name="state"]').value;
        const country =document.querySelector('input[name="country"]').value;

        const formData = {
            name,mobile,house,street,landmark,city,pin,state,country
        }
        console.log("form data :",formData)

      fetch(`/editnewAddress/${addrid}`,{
        method : "post",
        headers : {
          "Content-Type" :"application/json"
        },
        body: JSON.stringify(formData)
      })
      .then(res=>res.json())
      .then(data=>{
        if(data.success){
          location.href = '/getAddress'
        } else {
          location.href = '/getAddress'
        }
      })
    }
</script>

<%- include('../layout/userFooter') %>
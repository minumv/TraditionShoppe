<%- include('../layout/adminHeader') %>
<section>   
      <div class="container">
        <%offer.forEach((ofr)=>{%>
        <form role="form" id="offer-form" action="/updateOffer/<%= ofr._id %>" method="post">    
        <div class="row ">                    
            <div class="col-6">
                <div class="card card-plain">
                    <div class="card-header">
                      <h4 class="font-weight-bolder">Update Offer</h4>
                      <!-- <p class="mb-0">Enter your email and password to register</p> -->
                    </div>
                    
                   
                    <div class="card-body">             
                      <div class="input-group input-group-outline mb-3">
                         <input type="text" name="name" class="form-control" value="<%= ofr.offer_name %>">
                      </div>
                      <div class="input-group input-group-outline mb-3"> 
                      <div class="dropdown mx-3">
                        <select id="offertype" class="form-control">
                            <option value="<%= ofr.offer_type %>"><%= ofr.offer_type %></option>
                            <option value="Product Offer">Product Offer</option>
                            <option value="Category Offer">Category Offer</option>
                            <option value="Referral Offer">Referral Offer</option>
                              <option value="Today Deals Offer">Today Deals Offer</option>
                              <option value="Seller Offer">Seller Offer</option>                        
                              
                          </select></div></div>   
                                        
                      <div class="input-group input-group-outline mb-3">                  
                        <input type="text" name="discount_per" class="form-control" value="<%= ofr.discount_per %>">
                      </div>
                      <% let originalDate = new Date(ofr.start_date) %>
                      <% let formattedDate = `${originalDate.getDate().toString().padStart(2, '0')}-${(originalDate.getMonth() + 1).toString().padStart(2, '0')}-${originalDate.getFullYear()}`; %>
                      <% let crrtDate = new Date(formattedDate)%>
                      <div class="input-group input-group-outline mb-3">                   
                          <input type="date" name="start" class="form-control" value="<%=crrtDate.toISOString().slice(0,10) %>">
                      </div>
                      <%  originalDate = new Date(ofr.expire_date) %>
                      <% formattedDate = `${originalDate.getDate().toString().padStart(2, '0')}-${(originalDate.getMonth() + 1).toString().padStart(2, '0')}-${originalDate.getFullYear()}`; %>
                      <% crrtDate = new Date(formattedDate)%>
                      <div class="input-group input-group-outline mb-3">                   
                          <input type="date" name="end" class="form-control" value="<%=crrtDate.toISOString().slice(0,10) %>">
                      </div>
                          
                       
                      </div>
                      
                    </div>
                        
                        <div class="text-center d-flex justify-content-end">                         
                            <input type="submit" id="changeOfferButton" value="Update"  class="btn btn-lg bg-gradient-primary btn-lg w-100 mt-4 mb-0 me-2">
                            <a href="#" id="openModal"  data-modal-target="#modal" class="btn btn-lg bg-gradient-primary btn-lg w-100 mt-4 mb-0 me-2">delete</a>
                            
                        </div>
                      
                    </div>
                  
                </div> 
            </div> 
            <% if (errorMessage.length > 0) { %>                
                <div class="alert alert-danger" role="alert"> <%- errorMessage %>  </div>                  
            <% } %>
              <% if (successMessage.length > 0) { %>                
                <div class="alert alert-success" role="alert"> <%- successMessage %>  </div>                    
              <% } %>
            <div class="modal" id="modal">
                <div class="closeModal">
                  <a id="closeModal"  data-close-button class="close-button">&times;<a>              
                </div>
                <div class="trash-icon">
                  <span ><i class="fas fa-trash"></i></span>
                </div>
                <div class="modal-body">
                  Are you sure you want to delete this offer?
                </div>
                <div class="modal-footer">
                  <a id="cancel" data-close-button class="btnmodal btn btn-lg bg-light btn-lg w-25 mt-4 mb-0 me-2">No, cancel</a>
                  <button type="submit" formaction="/deleteOffer/<%= ofr._id %>" class="btnmodal btn btn-lg bg-gradient-primary btn-lg w-25 mt-4 mb-0 me-2">Yes, I'm sure</button>
                </div>
             </div> 
           

        </form>        
       </div>
       <div id="overlay"></div>
       <%})%>   
  </section>


  <%- include('../layout/adminFooter') %>